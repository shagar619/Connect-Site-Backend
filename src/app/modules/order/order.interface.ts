import { Types } from "mongoose";

// ржЕрж░рзНржбрж╛рж░рзЗрж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржПржирзБржо (Order Status Enum)
export enum OrderStatus {
  PENDING = "PENDING", // ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЕрж░рзНржбрж╛рж░ ржжрж┐ржпрж╝рзЗржЫрзЗ, ржХрж┐ржирзНрждрзБ ржкрзЗржорзЗржирзНржЯ рж╣ржпрж╝ржирж┐/ржХржиржлрж╛рж░рзНржо рж╣ржпрж╝ржирж┐
  ACCEPTED = "ACCEPTED", // рж╕рзЗрж▓рж╛рж░ ржЕрж░рзНржбрж╛рж░ржЯрж┐ ржЧрзНрж░рж╣ржг ржХрж░рзЗржЫрзЗ
  IN_PROGRESS = "IN_PROGRESS", // ржХрж╛ржЬ рж╢рзБрж░рзБ рж╣ржпрж╝рзЗржЫрзЗ
  DELIVERED = "DELIVERED", // рж╕рзЗрж▓рж╛рж░ ржХрж╛ржЬ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржжрж┐ржпрж╝рзЗржЫрзЗ, ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯрзЗрж░ ржЕржирзБржорзЛржжржирзЗрж░ ржЕржкрзЗржХрзНрж╖рж╛
  COMPLETED = "COMPLETED", // ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЕржирзБржорзЛржжржи ржХрж░рзЗржЫрзЗ, рж╕рзЗрж▓рж╛рж░ ржкрзЗржорзЗржирзНржЯ ржкрж╛ржмрзЗ
  CANCELLED = "CANCELLED", // ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржмрж╛ рж╕рзЗрж▓рж╛рж░ ржХрж░рзНрждрзГржХ ржмрж╛рждрж┐рж▓
  REFUNDED = "REFUNDED", // ржЯрж╛ржХрж╛ ржлрзЗрж░ржд ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ
}

export interface IOrder {
  _id?: Types.ObjectId;

  // ЁЯФЧ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржлрж┐рж▓рзНржбрж╕
  serviceId: Types.ObjectId; // ржХрзЛржи рж╕рж╛рж░рзНржнрж┐рж╕ ржЕрж░рзНржбрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
  clientId: Types.ObjectId; // ржХрзЛржи ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЕрж░рзНржбрж╛рж░ ржХрж░рзЗржЫрзЗ
  sellerId: Types.ObjectId; // ржХрзЛржи рж╕рзЗрж▓рж╛рж░ рж╕рж╛рж░рзНржнрж┐рж╕ржЯрж┐ ржкрзНрж░ржжрж╛ржи ржХрж░ржЫрзЗ

  // ЁЯТ╡ ржЖрж░рзНржерж┐ржХ ржлрж┐рж▓рзНржбрж╕
  totalPrice: number; // рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ ржорзЛржЯ ржжрж╛ржо
  platformFee: number; // ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржорзЗрж░ ржХржорж┐рж╢ржи (ржпрзЗржоржи 10%)
  netAmount: number; // рж╕рзЗрж▓рж╛рж░ ржпрзЗ ржкрж░рж┐ржорж╛ржг ржЕрж░рзНрже ржкрж╛ржмрзЗ (totalPrice - platformFee)

  // ЁЯТ│ ржкрзЗржорзЗржирзНржЯ рждржерзНржп (Payment Integration ржПрж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржи)
  paymentIntentId: string; // Stripe/SSLCommerz ржерзЗржХрзЗ ржЖрж╕рж╛ ID
  transactionId: Types.ObjectId; // ржЯрзНрж░рж╛ржиржЬрж╛ржХрж╢ржи ржоржбрж┐ржЙрж▓рзЗрж░ рж╕рж╛ржерзЗ рж▓рж┐ржЩрзНржХ

  // тЪЩя╕П рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржПржмржВ рж╕ржоржпрж╝
  orderStatus: OrderStatus;
  isPaid: boolean; // ржкрзЗржорзЗржирзНржЯ рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ ржХрж┐ржирж╛

  // тЬЕ ADDED: ржмрж╛рждрж┐рж▓рзЗрж░ ржХрж╛рж░ржг
  cancellationReason?: string;

  // тЬЕ ADDED: ржбрзЗрж▓рж┐ржнрж╛рж░рж┐рж░ рждрж╛рж░рж┐ржЦ
  deliveryDate?: Date;

  createdAt?: Date;
  updatedAt?: Date;
}
